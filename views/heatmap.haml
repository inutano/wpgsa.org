
%html{ lang: "en" }
  %head
    %meta{ charset: "utf-8" }
    %meta{ "http-equiv" => "X-UA-Compatible", content: "IE=edge" }
    %meta{ name: "viewport", content: "width=device-width, initial-scale=1" }

    %meta{ name: "description", content: "wPGSA is a method to estimate relative activities of transcriptional regulators from given transcriptome data." }
    %meta{ name: "author", content: "Eiryo Kawakami, Tazro Ohta" }

    %title= "wPGSA online"

    // Bootstrap core and typeahead CSS
    %link{ href: "#{app_root}/css/bootstrap.min.css", rel: "stylesheet" }

    // Custom style for this website
    %link{ href: "#{app_root}/style.css", rel: "stylesheet"}

  %body
    %nav.navbar.navbar-inverse.navbar-fixed-top
      .container
        .navbar-header
          %button.navbar-toggle.collapsed{ type: "button", "data-toggle" => "collapse", "data-target" => "#navbar", "aria-expanded" => "false", "aria-controls" => "navbar" }
            %span.sr-only Toggle navigation
            %span.icon-bar
            %span.icon-bar
            %span.icon-bar
          %a.navbar-brand{ href: "#{app_root}" }= "wPGSA"
        #navbar.collapse.navbar-collapse
          %ul.nav.navbar-nav
            %li
              %a{ href: "/download" }= "Download Peak Data"
            %li
              %a{ href: "https://github.com/eiryo-kawakami/wPGSA" }= "Documentation"
            %li
              %a{ href: "/#Contributors" }= "Contributors"
            %li
              %a{ href: "/#Citation" }= "Citation"
            %li
              %a{ href: "https://github.com/eiryo-kawakami/wPGSA/issues" }= "Report Problem"
          %ul.nav.navbar-nav.navbar-right
            %li
              %a{ href: "/result?uuid=example" }= "View Example Data"


    .container
      %row
        .col-md-7
          %h2
            wPGSA Result
        .col-md-2
          .btn-group.navButton{ role: "group" }
            %a#viewTable
              .button.btn.btn-primary.btn-lg
                View Data Table
        .col-md-2
          .btn-group.navButton{ role: "group" }
            .dropdown
              .button.btn.btn-primary.btn-lg.dropdown-toggle{ :type => "button", :id => "download-dropdown", "data-toggle" => "dropdown", "aria-haspopup" => true, "aria-expanded" => true }
                Download TSV
                %span.caret
              %ul.dropdown-menu{ "aria-labelledby" => "download-dropdown" }
                %li
                  %a#pValue
                    p-value
                %li
                  %a#qValue
                    q-value
                %li
                  %a#tScore
                    Enrichment Score
        .col-md-1
          .btn-group.navButton{ role: "group" }
            %a{ :href => "#" }
              .button.btn.btn-primary.btn-lg.helpButton
                %span.glyphicon.glyphicon-question-sign{ "aria-hidden" => true, "data-toggle" => "modal", "data-target" => "#heatmapDescription" }

          .modal.fade#heatmapDescription{ tablindex: "-1", role: "dialog", "aria-labelledby" => "heatmapDescriptionLabel"}
            .modal-dialog{ role: "document" }
              .modal-content
                .modal-header
                  %button.close{ type: "button", "data-dismiss" => "modal", "aria-label" => "Close" }
                    %span{ "aria-hidden" => true }= "&times;"
                  %h4.modal-title#heatmapDescriptionLabel
                    wPGSA Result Heatmap View
                .modal-body
                  %h3 Heatmap
                  %p
                    The individual Enrichment Score of each experimental condition (vertical) and each TF (horizontal). The corresponding TF and the detailed data for the horizontal line can be seen by hovering the mouse over.

      %row
        .col-md-12
          %hr

      %row
        .col-md-12
          #heatmap

    %footer.footer
      .container
        %row
          .col-md-4.col-md-offset-4
            %ul.list-inline
              %li
                %a{ href: "http://www.riken.jp/en/research/labs/ims/dis_sys_model/", target: "_blank" }
                  %img{ src: "/images/logo/riken-logo.gif", width: 100 }
              %li
                %a{ href: "http://dbcls.rois.ac.jp", target: "_blank" }
                  %img{ src: "/images/logo/dbcls_logo.png", width: 100 }
        %row
          .col-md-6.col-md-offset-3
            %p.acknowledgement
              Need help? Create an issue on
              %a{ href: "https://github.com/eiryo-kawakami/wPGSA/issues" }
                github
              or
              %a{ href: "mailto:t.ohta@dbcls.rois.ac.jp" }
                contact us

    /
      Bootstrap Core Javascript
      =========================
    %script{ src: "#{app_root}/js/jquery.min.js" }
    %script{ src: "#{app_root}/js/bootstrap.min.js" }
    %script{ src: "#{app_root}/js/wpgsa/result.js" }

    / load hclust data
    %script{ src: "#{app_root}/data/#{@uuid}/data.hclust.js" }

    %script{ src: "#{app_root}/js/d3.min.js" }
    %script{ src: "#{app_root}/js/wpgsa/heatmap.js" }

    %script{ src: "#{app_root}/js/ie10-viewport-bug-workaround.js" }
    %script{ src: "#{app_root}/js/liquidmetal.js" }
